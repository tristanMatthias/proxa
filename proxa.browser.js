!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).window=e.window||{})}(this,function(e){"use strict";const t=Symbol("proxa"),o=Symbol("proxaUpdate"),r=Symbol("proxaCallbacks"),n=Symbol("proxaPropCallbacks"),s=Symbol("proxaParent"),c=Symbol("proxaIsArray"),a=[t,o,r,n,s,c,"toJSON"],i=(e,l,f,p)=>{let d;const u={get(e,o){if(a.includes(o))return e[o];const r=e[o];return r&&!r[t]&&"object"==typeof r&&(e[o]=i(r,void 0,void 0,d)),e[o]},set:(e,t,r)=>e[t]===r||(e[t]=r,a.includes(t)||e[o](t,r),!0)};if(e[t]?d=e:((d=new Proxy(e,u))[t]=!0,d[r]=[],d[n]=new Map,d[o]=(e,t)=>{d[r].forEach(o=>o(d,e,t));const c=d[n].get(e);c&&c.forEach(o=>o(d,e,t)),d[s]&&d[s][o]()},p&&(d[s]=p),e instanceof Array&&(d[c]=!0),Object.defineProperty(d,"toJSON",{enumerable:!1,writable:!1,value:()=>{const e=Object.assign({},d);return a.forEach(t=>delete e[t]),Object.entries(e).forEach(([o,r])=>{r&&"object"==typeof r&&r[t]&&(e[o]=r.toJSON())}),d[c]?Object.entries(e).reduce((e,[t,o])=>(/^\d+$/.test(t)&&e.push(o),e),[]):(delete e.toJSON,e)}})),l)if(f||d[r].includes(l)){if(f){let e=d[n].get(f);e||(e=[],d[n].set(f,e)),e.push(l)}}else d[r].push(l);return d};e.proxa=i,Object.defineProperty(e,"__esModule",{value:!0})});
