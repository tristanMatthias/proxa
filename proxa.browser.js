!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).window=e.window||{})}(this,function(e){"use strict";const t=Symbol("proxa"),o=Symbol("proxaUpdate"),r=Symbol("proxaCallbacks"),n=Symbol("proxaPropCallbacks"),l=Symbol("proxaParent"),s=Symbol("proxaIsArray"),i=[t,o,r,n,l,s,"toJSON"],a=(e,c,d,f)=>{let p;const u={get(e,o){if(i.includes(o))return e[o];const r=e[o];return void 0!==r?null===r?null:(r[t]||"object"!=typeof r||(e[o]=a(r,void 0,void 0,p)),e[o]):void 0},set:(e,t,r)=>e[t]==r||(e[t]=r,i.includes(t)||e[o](t,r),!0)};if(e[t]?p=e:((p=new Proxy(e,u))[t]=!0,p[r]=[],p[n]=new Map,p[o]=(e,t)=>{p[r].forEach(o=>o(p,e,t));const s=p[n].get(e);s&&s.forEach(o=>o(p,e,t)),p[l]&&p[l][o]()},f&&(p[l]=f),e instanceof Array&&(p[s]=!0),Object.defineProperty(p,"toJSON",{enumerable:!1,writable:!1,value:()=>{let e=Object.assign({},p);return i.forEach(t=>delete e[t]),Object.entries(e).forEach(([o,r])=>{r&&"object"==typeof r&&r[t]&&(e[o]=r.toJSON())}),p[s]?Object.entries(e).reduce((e,[t,o])=>(/^\d+$/.test(t)&&e.push(o),e),[]):(delete e.toJSON,e)}})),c)if(d||p[r].includes(c)){if(d){let e=p[n].get(d);e||(e=[],p[n].set(d,e)),e.push(c)}}else p[r].push(c);return p};e.proxa=a,Object.defineProperty(e,"__esModule",{value:!0})});
