!function(e,o){"object"==typeof exports&&"undefined"!=typeof module?o(exports):"function"==typeof define&&define.amd?define(["exports"],o):o((e=e||self).window=e.window||{})}(this,function(e){"use strict";const o=Symbol("proxa"),t=Symbol("proxaUpdate"),r=Symbol("proxaCallbacks"),n=Symbol("proxaPropCallbacks"),s=Symbol("proxaParent"),c=Symbol("proxaIsArray"),i=[o,t,r,n,s,c,"toJSON"],l=(e,f,a,p)=>{let d;const b={get(e,t){if(i.includes(t))return e[t];const r=e[t];return r&&!r[o]&&"object"==typeof r&&(e[t]=l(r,void 0,void 0,d)),e[t]},set:(e,o,r)=>e[o]===r||(e[o]=r,i.includes(o)||e[t](o,r),!0)};if(e[o]?d=e:((d=new Proxy(e,b))[o]=!0,d[r]=[],d[n]=new Map,d[t]=(e,o)=>{d[r].forEach(t=>t(d,e,o));const c=d[n].get(e);c&&c.forEach(t=>t(d,e,o)),d[s]&&d[s][t]()},p&&(d[s]=p),e instanceof Array&&(d[c]=!0),Object.defineProperty(d,"toJSON",{enumerable:!1,writable:!1,value:()=>{const e=Object.assign({},d);return i.forEach(o=>delete e[o]),Object.entries(e).forEach(([t,r])=>{r&&"object"==typeof r&&r[o]&&(e[t]=r.toJSON())}),d[c]?Object.entries(e).reduce((e,[o,t])=>(/^\d+$/.test(o)&&e.push(t),e),[]):(delete e.toJSON,e)}})),f)if(a||d[r].includes(f)){if(a){let e=d[n].get(a);e||(e=[],d[n].set(a,e)),e.push(f)}}else d[r].push(f);return d};e.off=(e,o,t)=>{const s=e;if(console.log(s[r]),t){const e=s[n].get(t);if(!e)throw new Error(`Could not find any callbacks for property '${t}'`);const r=e.indexOf(o);if(r<0)throw new Error(`Callback does not exist on property '${t}' for this object`);e.splice(r,1)}else{const e=s[r].indexOf(o);if(console.log(e),e<0)throw new Error("Callback does not exist on this object");s[r].splice(e,1)}return e},e.proxa=l,Object.defineProperty(e,"__esModule",{value:!0})});
